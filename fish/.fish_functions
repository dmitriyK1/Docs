# To just rerun your last command, simply type '!!'
# '!! sudo' will prepend sudo to your most recent command
# Running !! with anything other than sudo will append the argument to your most recent command
# To add another command to prepend list remove the # on line 10 and put the command in the quotes. Repeat as needed
# function !!;
#   set var (history | head -n 1)
#   if test $argv
#     if test $argv = "sudo"        #; or "any other command you want to prepend"
#         eval $argv $var
#     else
#         eval $var $argv
#     end
#     else
#         eval $var
#   end
# end

function bind_bang
  switch (commandline -t)
  case "!"
    commandline -t $history[1]; commandline -f repaint
  case "*"
    commandline -i !
  end
end

function bind_dollar
  switch (commandline -t)
  case "!"
    commandline -t ""
    commandline -f history-token-search-backward
  case "*"
    commandline -i '$'
  end
end

function fish_user_key_bindings
  bind ! bind_bang
  bind '$' bind_dollar
  fzf_key_bindings
end

# Git log find by commit message
function glf
  git log --all --grep=$argv
end

# function vim
#   mvim -v $argv
# end

# Git find all commits unique to a current branch
function gitu
  git log (git rev-parse --abbrev-ref HEAD) --not (git for-each-ref --format='%(refname)' refs/heads/ | grep -v "refs/heads/"(git rev-parse --abbrev-ref HEAD))
end

# Diff current branch with specified branch
function gdh
  git diff $argv HEAD
end

# Diff current branch with specified branch using difftool
function gdlh
  git difftool $argv HEAD | less
end

function gro
  gron $argv[2] | fgrep $argv[1] | norg
end

function findByPort
  lsof -i :$argv
end
